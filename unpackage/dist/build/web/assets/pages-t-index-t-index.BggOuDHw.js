import{r as e,h as a,a as l,w as t,c as s,j as c,F as o,i,S as r,o as n,b as u,t as d,u as f,k as p,s as v,n as g,f as m}from"./index-7CcXYKR1.js";import{_ as h}from"./背景@1x.B6KvhxrT.js";import{a as _,c as x,b as w,d as y,e as k,s as C}from"./index.DP5K4sp-.js";import{_ as F,a as j}from"./_plugin-vue_export-helper.BYJki4Jl.js";import{u as D}from"./useMainStore.NtmXK-AL.js";const S=F({__name:"t-index",setup(F){let S=e([]),b=e([]),A=e("");const P=e("");async function B(){let e=await w(A.value,M.value,L.value,R.value);if(console.log(e.data.Results,"daochu"),0!=e.code)v({title:"查看结果失败",icon:"error",duration:1e3});else{D().setResultData(e.data.Results),g({url:"/pages/t-content/t-content"})}E()}const I=e(!1),N=e(!1),G=e(!1),L=e(null);function E(){I.value=!1,N.value=!1,G.value=!1}const M=e(""),R=e(null);function T(e,a,l){M.value=a,R.value=l,e?G.value=!0:async function(){let e=await y(A.value,M.value,L.value,R.value,0);if(console.log(e,"copy"),0!=e.code)v({title:"操作失败",icon:"error",duration:1e3});else{const a=D();a.setCopyData(e.data.Details),a.setSharedData(A.value,L.value),g({url:"/pages/t-publish/t-publish"})}E()}()}async function U(e,a){let l=await x(e,a);console.log(l,"kkkkk");let t=l.data.titleList;P.value=t.titleEtime;let s=[];t.SepProPracticeInfos&&t.SepProPracticeInfos.forEach(((e,a)=>{s.push({status:e.releaseStatus,theme:e.title,deadline:e.selectEtime.substring(0,10),code:e.code})})),S.value=s}return j((()=>{!async function(){let e=await _();console.log(e,"aaa");let a=e.data.proPracticeList;a.forEach(((e,a)=>{var l;l=e.projectPracticeName,/^\d{4}/.test(l)||(e.projectPracticeName=e.grade+e.majorName+e.projectPracticeName)})),b.value=a;const l=D();null!=l.profession?(A.value=l.profession,L.value=l.proId,U(l.profession,l.proId)):A.value="请选择课题"}()})),(e,_)=>{const x=m,w=i,F=r;return n(),a(o,null,[l(F,{class:"containers","scroll-y":"true"},{default:t((()=>[l(x,{src:h,mode:"aspectFill",class:"bg"}),l(w,{class:"headtext"},{default:t((()=>[u("教师端")])),_:1}),l(w,{class:"xuan",onClick:_[0]||(_[0]=e=>I.value=!0)},{default:t((()=>[u(d(f(A))+" ",1),l(x,{src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3e%3cg%3e%3cg%3e%3cpath%20d='M3.20711,5C2.761654,5,2.538571,5.538571,2.853554,5.853554L7.64645,10.64645C7.84171,10.841709999999999,8.158290000000001,10.841709999999999,8.35355,10.64645L13.1464,5.853554C13.4614,5.538571,13.2383,5,12.7929,5L3.20711,5Z'%20fill='%2309101D'%20fill-opacity='1'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mode:"aspectFill"})])),_:1}),l(w,{class:"nnn"},{default:t((()=>[u(" 工程项目选课系统 ")])),_:1}),l(w,{class:"sss"},{default:t((()=>[u("精准匹配课程需求 简化选课流程")])),_:1}),l(w,{class:"zhong"},{default:t((()=>[l(w,{class:"deadline"},{default:t((()=>[u("出题截止时间:"+d(P.value),1)])),_:1})])),_:1}),l(w,{class:"items"},{default:t((()=>[l(w,{class:"itemn",onClick:_[1]||(_[1]=e=>{"请选择课题"==A.value?v({title:"请先选择课题",icon:"error",duration:1500}):(D().setSharedData(A.value,L.value),g({url:"/pages/t-publish/t-publish"}))})},{default:t((()=>[l(x,{src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='91'%20height='91'%20viewBox='0%200%2091%2091'%3e%3cdefs%3e%3cfilter%20id='master_svg0_17_00477/17_00472'%20filterUnits='objectBoundingBox'%20color-interpolation-filters='sRGB'%20x='-0.32786885245901637'%20y='-0.29508196721311475'%20width='1.6557377049180328'%20height='1.6557377049180328'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset%20dy='2'%20dx='0'/%3e%3cfeGaussianBlur%20stdDeviation='5'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.3490196168422699%200%200%200%200%200.5137255191802979%200%200%200%200%200.9490196108818054%200%200%200%200.6299999952316284%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3cradialGradient%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20id='master_svg1_17_00869'%20gradientTransform='translate(45.5%2022.84259068965912)%20rotate(90)%20scale(51.15740931034088%2051.15740931034088)'%3e%3cstop%20offset='0%25'%20stop-color='%2386A8FF'%20stop-opacity='1'/%3e%3cstop%20offset='100%25'%20stop-color='%235880F5'%20stop-opacity='1'/%3e%3c/radialGradient%3e%3c/defs%3e%3cg%3e%3cg%20filter='url(%23master_svg0_17_00477/17_00472)'%3e%3cellipse%20cx='45.5'%20cy='43.5'%20rx='30.5'%20ry='30.5'%20fill='url(%23master_svg1_17_00869)'%20fill-opacity='1'/%3e%3c/g%3e%3cg%3e%3cg%3e%3crect%20x='30'%20y='41.5128173828125'%20width='31'%20height='3.9743590354919434'%20rx='1.9871795177459717'%20fill='%23FFFFFF'%20fill-opacity='1'/%3e%3c/g%3e%3cg%20transform='matrix(0,-1,1,0,-15.487227439880371,102.51277256011963)'%3e%3crect%20x='43.51277256011963'%20y='59'%20width='31'%20height='3.9743590354919434'%20rx='1.9871795177459717'%20fill='%23FFFFFF'%20fill-opacity='1'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mode:"",class:"newimg"}),l(w,{class:"new"},{default:t((()=>[u(" 新建课题 ")])),_:1})])),_:1}),(n(!0),a(o,null,p(f(S),((e,a)=>(n(),s(w,{class:"item",key:a},{default:t((()=>[l(w,{class:"head"},{default:t((()=>[l(w,{class:"st"},{default:t((()=>[l(x,{src:e.status?"/static/已发布@1x.png":"/static/未发布@1x.png",mode:"scaleToFill"},null,8,["src"])])),_:2},1024),l(x,{class:"es",src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3e%3cg%3e%3cg%3e%3cellipse%20cx='4'%20cy='8'%20rx='1'%20ry='1'%20fill='%23AAA8A9'%20fill-opacity='1'/%3e%3c/g%3e%3cg%3e%3cellipse%20cx='8'%20cy='8'%20rx='1'%20ry='1'%20fill='%23AAA8A9'%20fill-opacity='1'/%3e%3c/g%3e%3cg%3e%3cellipse%20cx='12'%20cy='8'%20rx='1'%20ry='1'%20fill='%23AAA8A9'%20fill-opacity='1'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",onClick:a=>{return l=e.theme,t=e.code,N.value=!0,M.value=l,void(R.value=t);var l,t}},null,8,["onClick"])])),_:2},1024),l(w,{class:"theme"},{default:t((()=>[u(d(e.theme),1)])),_:2},1024),l(w,{class:"ddl"},{default:t((()=>[u("选课截止："+d(e.deadline),1)])),_:2},1024),l(x,{class:"btn",src:e.status?"/static/按钮@1x.png":"/static/1111.png",mode:"scaleToFill",onClick:a=>T(e.status,e.theme,e.code)},null,8,["src","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1}),I.value?(n(),s(w,{key:0,class:"mask"},{default:t((()=>[l(w,{class:"modal",style:{"overflow-y":"auto","max-height":"100vh"}},{default:t((()=>[(n(!0),a(o,null,p(f(b),((e,a)=>(n(),s(w,{class:"profession",key:a,onClick:a=>{return l=e,A.value=l.projectPracticeName,L.value=l.projectPracticeCode,U(l.projectPracticeName,l.projectPracticeCode),void E();var l}},{default:t((()=>[u(d(e.projectPracticeName),1)])),_:2},1032,["onClick"])))),128)),l(w,{class:"footer",onClick:E},{default:t((()=>[u(" 取消 ")])),_:1})])),_:1})])),_:1})):c("",!0),N.value?(n(),s(w,{key:1,class:"mask"},{default:t((()=>[l(w,{class:"modal"},{default:t((()=>[l(w,{class:"profession",onClick:_[2]||(_[2]=e=>async function(){let e=await y(A.value,M.value,L.value,R.value,1);if(console.log(e,"xiugai"),0!=e.code)v({title:"查看结果失败",icon:"error",duration:1e3});else{const a=D();a.setChangeData(e.data.Details),a.setSharedData(A.value,L.value),g({url:"/pages/t-publish/t-publish"})}E()}())},{default:t((()=>[u(" 修改出题内容 ")])),_:1}),l(w,{class:"profession",onClick:B},{default:t((()=>[u(" 导出结果 ")])),_:1}),l(w,{class:"profession",onClick:_[3]||(_[3]=e=>async function(){let e=await C(A.value,M.value,L.value,R.value);if(console.log(e.data,"copys"),0!=e.code)v({title:"创建失败",icon:"error",duration:1e3});else{const a=D();a.setCopyData(e.data.titleCopy),a.setSharedData(A.value,L.value),g({url:"/pages/t-publish/t-publish"})}E()}())},{default:t((()=>[u(" 创建副本 ")])),_:1}),l(w,{class:"dels",onClick:_[4]||(_[4]=e=>async function(){0!=(await k(A.value,M.value,L.value,R.value)).code&&v({title:"删除失败",icon:"error",duration:1e3}),E(),U(A.value,L.value)}())},{default:t((()=>[u(" 删除 ")])),_:1}),l(w,{class:"footer",onClick:E},{default:t((()=>[u(" 取消 ")])),_:1})])),_:1})])),_:1})):c("",!0),G.value?(n(),s(w,{key:2,class:"mask"},{default:t((()=>[l(w,{class:"modal"},{default:t((()=>[l(w,{class:"profession",onClick:_[5]||(_[5]=e=>async function(){let e=await y(A.value,M.value,L.value,R.value,1);if(0!=e.code)v({title:"查看详情失败",icon:"error",duration:1e3});else{const a=D();a.setDetailData(e.data.Details),a.setSharedData(A.value,L.value),g({url:"/pages/t-detail/t-detail"})}E()}())},{default:t((()=>[u(" 查看出题详情 ")])),_:1}),l(w,{class:"profession",onClick:_[6]||(_[6]=e=>async function(){B()}())},{default:t((()=>[u(" 查看选题结果 ")])),_:1}),l(w,{class:"footer",onClick:E},{default:t((()=>[u(" 取消 ")])),_:1})])),_:1})])),_:1})):c("",!0)],64)}}},[["__scopeId","data-v-af248dc4"]]);export{S as default};
