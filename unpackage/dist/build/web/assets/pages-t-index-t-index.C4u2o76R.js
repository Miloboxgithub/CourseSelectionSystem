import{r as e,h as a,a as t,w as l,c as s,j as c,F as o,i,S as r,o as n,b as u,t as d,u as f,k as p,n as v,s as g,f as m}from"./index-BQqAIaJa.js";import{_ as h}from"./背景@1x.B6KvhxrT.js";import{a as _,c as x,b as w,d as y,e as k,s as C}from"./index.BtZ1W5nT.js";import{_ as F,a as j}from"./_plugin-vue_export-helper.VBtj53E2.js";import{u as S}from"./useMainStore.fUJgjUay.js";const D=F({__name:"t-index",setup(F){let D=e([]),P=e([]),b=e("");const A=e("");async function B(){let e=await w(b.value,E.value,L.value,R.value);if(console.log(e.data.Results,"daochu"),0!=e.code)g({title:"查看结果失败",icon:"error",duration:1e3});else{S().setResultData(e.data.Results),v({url:"/pages/t-content/t-content"})}M()}const N=e(!1),I=e(!1),G=e(!1),L=e(null);function M(){N.value=!1,I.value=!1,G.value=!1}const E=e(""),R=e(null);function T(e,a,t){E.value=a,R.value=t,e?G.value=!0:async function(){let e=await y(b.value,E.value,L.value,R.value,0);if(console.log(e,"copy"),0!=e.code)g({title:"操作失败",icon:"error",duration:1e3});else{const a=S();a.setCopyData(e.data.Details),a.setSharedData(b.value,L.value),v({url:"/pages/t-publish/t-publish"})}M()}()}async function U(e,a){let t=await x(e,a);console.log(t,"kkkkk");let l=t.data.titleList;A.value=function(e){const a=new Date(e),t=a.getMonth()+1,l=a.getDate();return`${t.toString().padStart(2,"0")}月${l.toString().padStart(2,"0")}日`}(l.titleEtime);let s=[];l.SepProPracticeInfos&&l.SepProPracticeInfos.forEach(((e,a)=>{s.push({status:e.releaseStatus,theme:e.title,deadline:e.selectEtime.substring(0,10),code:e.code})})),D.value=s}return j((()=>{!async function(){let e=await _();console.log(e,"aaa");let a=e.data.proPracticeList;a.forEach(((e,a)=>{var t;t=e.projectPracticeName,/^\d{4}/.test(t)||(e.projectPracticeName=e.grade+e.majorName+e.projectPracticeName)})),P.value=a;const t=S();null!=t.profession?(b.value=t.profession,L.value=t.proId,U(t.profession,t.proId)):(b.value=a[0].projectPracticeName,L.value=a[0].projectPracticeCode,U(a[0].projectPracticeName,a[0].projectPracticeCode))}()})),(e,_)=>{const x=m,w=i,F=r;return n(),a(o,null,[t(F,{class:"containers","scroll-y":"true"},{default:l((()=>[t(x,{src:h,mode:"aspectFill",class:"bg"}),t(w,{class:"headtext"},{default:l((()=>[u("教师端")])),_:1}),t(w,{class:"xuan",onClick:_[0]||(_[0]=e=>N.value=!0)},{default:l((()=>[u(d(f(b))+" ",1),t(x,{src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3e%3cg%3e%3cg%3e%3cpath%20d='M3.20711,5C2.761654,5,2.538571,5.538571,2.853554,5.853554L7.64645,10.64645C7.84171,10.841709999999999,8.158290000000001,10.841709999999999,8.35355,10.64645L13.1464,5.853554C13.4614,5.538571,13.2383,5,12.7929,5L3.20711,5Z'%20fill='%2309101D'%20fill-opacity='1'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mode:"aspectFill"})])),_:1}),t(w,{class:"nnn"},{default:l((()=>[u(" 工程项目选课系统 ")])),_:1}),t(w,{class:"sss"},{default:l((()=>[u("精准匹配课程需求 简化选课流程")])),_:1}),t(w,{class:"zhong"},{default:l((()=>[t(w,{class:"deadline"},{default:l((()=>[u("出题截止时间:"+d(A.value),1)])),_:1})])),_:1}),t(w,{class:"items"},{default:l((()=>[t(w,{class:"itemn",onClick:_[1]||(_[1]=e=>(S().setSharedData(b.value,L.value),void v({url:"/pages/t-publish/t-publish"})))},{default:l((()=>[t(x,{src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='91'%20height='91'%20viewBox='0%200%2091%2091'%3e%3cdefs%3e%3cfilter%20id='master_svg0_17_00477/17_00472'%20filterUnits='objectBoundingBox'%20color-interpolation-filters='sRGB'%20x='-0.32786885245901637'%20y='-0.29508196721311475'%20width='1.6557377049180328'%20height='1.6557377049180328'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset%20dy='2'%20dx='0'/%3e%3cfeGaussianBlur%20stdDeviation='5'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.3490196168422699%200%200%200%200%200.5137255191802979%200%200%200%200%200.9490196108818054%200%200%200%200.6299999952316284%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3cradialGradient%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20id='master_svg1_17_00869'%20gradientTransform='translate(45.5%2022.84259068965912)%20rotate(90)%20scale(51.15740931034088%2051.15740931034088)'%3e%3cstop%20offset='0%25'%20stop-color='%2386A8FF'%20stop-opacity='1'/%3e%3cstop%20offset='100%25'%20stop-color='%235880F5'%20stop-opacity='1'/%3e%3c/radialGradient%3e%3c/defs%3e%3cg%3e%3cg%20filter='url(%23master_svg0_17_00477/17_00472)'%3e%3cellipse%20cx='45.5'%20cy='43.5'%20rx='30.5'%20ry='30.5'%20fill='url(%23master_svg1_17_00869)'%20fill-opacity='1'/%3e%3c/g%3e%3cg%3e%3cg%3e%3crect%20x='30'%20y='41.5128173828125'%20width='31'%20height='3.9743590354919434'%20rx='1.9871795177459717'%20fill='%23FFFFFF'%20fill-opacity='1'/%3e%3c/g%3e%3cg%20transform='matrix(0,-1,1,0,-15.487227439880371,102.51277256011963)'%3e%3crect%20x='43.51277256011963'%20y='59'%20width='31'%20height='3.9743590354919434'%20rx='1.9871795177459717'%20fill='%23FFFFFF'%20fill-opacity='1'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mode:"",class:"newimg"}),t(w,{class:"new"},{default:l((()=>[u(" 新建课题 ")])),_:1})])),_:1}),(n(!0),a(o,null,p(f(D),((e,a)=>(n(),s(w,{class:"item",key:a},{default:l((()=>[t(w,{class:"head"},{default:l((()=>[t(w,{class:"st"},{default:l((()=>[t(x,{src:e.status?"/static/已发布@1x.png":"/static/未发布@1x.png",mode:"scaleToFill"},null,8,["src"])])),_:2},1024),t(x,{class:"es",src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3e%3cg%3e%3cg%3e%3cellipse%20cx='4'%20cy='8'%20rx='1'%20ry='1'%20fill='%23AAA8A9'%20fill-opacity='1'/%3e%3c/g%3e%3cg%3e%3cellipse%20cx='8'%20cy='8'%20rx='1'%20ry='1'%20fill='%23AAA8A9'%20fill-opacity='1'/%3e%3c/g%3e%3cg%3e%3cellipse%20cx='12'%20cy='8'%20rx='1'%20ry='1'%20fill='%23AAA8A9'%20fill-opacity='1'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",onClick:a=>{return t=e.theme,l=e.code,I.value=!0,E.value=t,void(R.value=l);var t,l}},null,8,["onClick"])])),_:2},1024),t(w,{class:"theme"},{default:l((()=>[u(d(e.theme),1)])),_:2},1024),t(w,{class:"ddl"},{default:l((()=>[u("选课截止："+d(e.deadline),1)])),_:2},1024),t(x,{class:"btn",src:e.status?"/static/按钮@1x.png":"/static/1111.png",mode:"scaleToFill",onClick:a=>T(e.status,e.theme,e.code)},null,8,["src","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1}),N.value?(n(),s(w,{key:0,class:"mask"},{default:l((()=>[t(w,{class:"modal"},{default:l((()=>[(n(!0),a(o,null,p(f(P),((e,a)=>(n(),s(w,{class:"profession",key:a,onClick:a=>{return t=e,b.value=t.projectPracticeName,L.value=t.projectPracticeCode,U(t.projectPracticeName,t.projectPracticeCode),void M();var t}},{default:l((()=>[u(d(e.projectPracticeName),1)])),_:2},1032,["onClick"])))),128)),t(w,{class:"footer",onClick:M},{default:l((()=>[u(" 取消 ")])),_:1})])),_:1})])),_:1})):c("",!0),I.value?(n(),s(w,{key:1,class:"mask"},{default:l((()=>[t(w,{class:"modal"},{default:l((()=>[t(w,{class:"profession",onClick:_[2]||(_[2]=e=>async function(){let e=await y(b.value,E.value,L.value,R.value,1);if(console.log(e,"xiugai"),0!=e.code)g({title:"查看结果失败",icon:"error",duration:1e3});else{const a=S();a.setChangeData(e.data.Details),a.setSharedData(b.value,L.value),v({url:"/pages/t-publish/t-publish"})}M()}())},{default:l((()=>[u(" 修改出题内容 ")])),_:1}),t(w,{class:"profession",onClick:B},{default:l((()=>[u(" 导出结果 ")])),_:1}),t(w,{class:"profession",onClick:_[3]||(_[3]=e=>async function(){let e=await C(b.value,E.value,L.value,R.value);if(console.log(e.data,"copys"),0!=e.code)g({title:"创建失败",icon:"error",duration:1e3});else{const a=S();a.setCopyData(e.data.titleCopy),a.setSharedData(b.value,L.value),v({url:"/pages/t-publish/t-publish"})}M()}())},{default:l((()=>[u(" 创建副本 ")])),_:1}),t(w,{class:"dels",onClick:_[4]||(_[4]=e=>async function(){0!=(await k(b.value,E.value,L.value,R.value)).code&&g({title:"删除失败",icon:"error",duration:1e3}),M(),U(b.value,L.value)}())},{default:l((()=>[u(" 删除 ")])),_:1}),t(w,{class:"footer",onClick:M},{default:l((()=>[u(" 取消 ")])),_:1})])),_:1})])),_:1})):c("",!0),G.value?(n(),s(w,{key:2,class:"mask"},{default:l((()=>[t(w,{class:"modal"},{default:l((()=>[t(w,{class:"profession",onClick:_[5]||(_[5]=e=>async function(){let e=await y(b.value,E.value,L.value,R.value,1);if(0!=e.code)g({title:"查看详情失败",icon:"error",duration:1e3});else{const a=S();a.setDetailData(e.data.Details),a.setSharedData(b.value,L.value),v({url:"/pages/t-detail/t-detail"})}M()}())},{default:l((()=>[u(" 查看出题详情 ")])),_:1}),t(w,{class:"profession",onClick:_[6]||(_[6]=e=>async function(){B()}())},{default:l((()=>[u(" 查看选题结果 ")])),_:1}),t(w,{class:"footer",onClick:M},{default:l((()=>[u(" 取消 ")])),_:1})])),_:1})])),_:1})):c("",!0)],64)}}},[["__scopeId","data-v-dd96a21c"]]);export{D as default};
